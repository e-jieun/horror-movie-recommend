<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="root"></div>
  <!-- todo : 비동기 통신 AJAX 기술을 사용하기 위한 사전 준비 -->
  <!-- 
    work .1 http://kobis.or.kr/kobisopenapi/homepg/main/main.do 
   -->
  <script>
    const ajax = new XMLHttpRequest();
    // console.dir(ajax);
    // 	http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20120101
    // ?key를 신청해서 받은 부분을 문자열로 대입해줄 변수
    const myKey = `a3be73f165bde17dddd626f733831fdc`;
    // ?조회하고자하는 날짜 => 이 부분에 요청 인터페이스와 알맞은 타입의 값을 넣어서 요청하면 된다
    const test = `targetDt=20220623`;
    // ?rest 방식의 url을 .json 확장자 전까지 붙여넣어주고
    // ?응답 예시
    // ?http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20120101
    const _URL =`http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieList.json?key=${myKey}&${test}&itemPerPage=10`;
    // console.log(_URL);
    // ?요청 parameter : 3번항의 요청 인터페이스 정보를 참조하여 GET 방식으로 호출
    ajax.open("GET", _URL);
    ajax.responseType = "json";
    ajax.send();


    ajax.addEventListener('load', () => {
      const _movieAPI = ajax.response;
      console.log(_movieAPI);
      const boxOfficeList = _movieAPI.boxOfficeResult.dailyBoxOfficeList;
      for (let i = 0; i < boxOfficeList.length; i++) {
        console.log(`${i+1}등 영화 : ${_movieAPI.boxOfficeResult.dailyBoxOfficeList[i].movieNm}`);
      }
    });




  </script>
</body>

</html> 