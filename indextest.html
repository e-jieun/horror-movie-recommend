<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="root"></div>
  <!-- todo : 비동기 통신 AJAX 기술을 사용하기 위한 사전 준비 -->
  <!-- 
    work .1 http://kobis.or.kr/kobisopenapi/homepg/main/main.do 
   -->
  <script>
    const ajax = new XMLHttpRequest();
    // console.dir(ajax);
    // 	http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20120101
    // <!--?key를 신청해서 받은 부분을 문자열로 대입해줄 변수
    const myKey = `420782fb2a083bedd87f972af2385b05`;
    // <!--?조회하고자하는 날짜 => 이 부분에 요청 인터페이스와 알맞은 타입의 값을 넣어서 요청하면 된다
    // <!--todo: 이 부분에 검색하고자 하는 변수, 버튼이 들어가야 한다 
    // <!--*제임스완은 나온다, 띄어쓰기 없어도 됨, 띄어쓰기 해서 검색해도 잘 응답을 해준다
    //<!--todo: 고전 공포 영화도 소개할 것이므로 옛날 영화도 검색이 가능한지 알아봐야 한다 => 다리오 아르젠토, 알프레드 히치콕 등도 검색 가능
    // const test = `directorNm=조지 A. 로메로`;
    const test = `targetDt=20220715`;
    const name = `movieNm=좀비랜드`;
    // 영화유형 코드
    const genre = `movieTypeCd=default`;
    // <!--? rest 방식의 url을 .json 확장자 전까지 붙여넣어주고
    // <!--?응답 예시
    // <!--?http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20120101
    // <!--?itemPerPage = 결과값 row의 개수
    // <!--*영화 목록 조회 API 서비스 카테고리에서 사용방법 보기 
    // <!--? 국적 코드 
    // https://www.kobis.or.kr/kobisopenapi/homepg/apiservice/searchServiceInfo.do?serviceId=searchMovieList
    const _URL =`http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=${myKey}&${test}&itemPerPage=20`;
    // console.log(_URL);
    // <!--?요청 parameter : 3번항의 요청 인터페이스 정보를 참조하여 GET 방식으로 호출
    ajax.open("GET", _URL);
    // 응답해주는 타입? => JSON
    ajax.responseType = "json";
    ajax.send();

    ajax.addEventListener('load', () => {
      const _movieAPI = ajax.response;
      console.log(_movieAPI); //이 부분에서 응답을 받은 결과를 출력해준다
      const movieName = _movieAPI.bo
      const boxOfficeList = _movieAPI.boxOfficeResult.dailyBoxOfficeList;
      for (let i = 0; i < boxOfficeList.length; i++) {
        console.log(`${i+1}등 영화 : ${_movieAPI.boxOfficeResult.dailyBoxOfficeList[i].movieNm}`);
      }
    });
    // const movieName = _movieAPI.
    




  </script>
</body>

</html> 